<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Worky Dashboard V2</title>
  <link rel="stylesheet" href="worky.css">
</head>
<body data-theme="dark">
  <!-- Theme Toggle -->
  <button class="theme-toggle" id="themeToggle" title="Toggle theme">
    <span class="theme-icon">ğŸŒ™</span>
  </button>
  
  <!-- Command Palette (Cmd+K) -->
  <div class="command-palette" id="commandPalette">
    <div class="command-palette-content">
      <input type="text" class="command-input" id="commandInput" placeholder="Type a command or search...">
      <div class="command-results" id="commandResults"></div>
    </div>
  </div>
  
  <!-- Context Menu -->
  <div class="context-menu" id="contextMenu">
    <div class="context-menu-item" data-action="email">ğŸ“§ Draft Email</div>
    <div class="context-menu-item" data-action="reminder">â° Set Reminder</div>
    <div class="context-menu-item" data-action="hot">ğŸ”¥ Mark as Hot</div>
    <div class="context-menu-item" data-action="interview">ğŸ¯ Move to Interview</div>
    <div class="context-menu-item" data-action="research">ğŸ” Research Contact</div>
    <div class="context-menu-item" data-action="intel">ğŸ’¡ View Company Intel</div>
    <div class="context-menu-divider"></div>
    <div class="context-menu-item" data-action="archive">ğŸ“¦ Archive</div>
    <div class="context-menu-item danger" data-action="delete">ğŸ—‘ï¸ Delete</div>
  </div>
  
  <div class="sidebar">
    <div class="logo">
      <span class="logo-icon">ğŸ’¼</span>
      <h1>Worky</h1>
      <span class="version">v2.0</span>
    </div>
    
    <nav class="nav">
      <a class="nav-item active" data-section="overview">
        <span class="nav-icon">ğŸ </span>
        <span>Overview</span>
        <kbd class="shortcut">1</kbd>
      </a>
      <a class="nav-item" data-section="jobsearch">
        <span class="nav-icon">ğŸ¯</span>
        <span>Job Search</span>
        <kbd class="shortcut">2</kbd>
      </a>
      <a class="nav-item" data-section="analytics">
        <span class="nav-icon">ğŸ“Š</span>
        <span>Analytics</span>
        <kbd class="shortcut">3</kbd>
      </a>
      <a class="nav-item" data-section="interviews">
        <span class="nav-icon">ğŸ¤</span>
        <span>Interviews</span>
        <kbd class="shortcut">4</kbd>
      </a>
      <a class="nav-item" data-section="hearing">
        <span class="nav-icon">ğŸ§</span>
        <span>Hearing Project</span>
        <kbd class="shortcut">5</kbd>
      </a>
    </nav>
    
    <div class="sidebar-footer">
      <a class="chat-link" href="http://127.0.0.1:18789/?session=agent:work:main">
        ğŸ’¬ Chat with Worky
      </a>
      <div class="keyboard-help" id="keyboardHelp">
        <span class="help-icon">âŒ¨ï¸</span>
        <span>Press <kbd>/</kbd> to search</span>
      </div>
    </div>
  </div>
  
  <!-- Floating Chat Button -->
  <a href="http://127.0.0.1:18789/?session=agent:work:main" class="floating-chat-btn" title="Chat with Worky">
    ğŸ’¬
  </a>
  
  <div class="main">
    <!-- OVERVIEW -->
    <div class="section active" id="overview">
      <div class="page-header">
        <div>
          <h1 class="page-title">Worky Dashboard</h1>
          <p class="page-subtitle" id="currentDate">Loading...</p>
        </div>
        <div class="header-actions">
          <button class="btn btn-ghost" id="syncBtn" title="Sync with GitHub">
            <span class="sync-icon">ğŸ”„</span> Sync
          </button>
          <a href="http://127.0.0.1:18789/?session=agent:work:main" class="btn btn-chat">
            ğŸ’¬ Chat
          </a>
        </div>
      </div>
      
      <!-- Weekly Digest -->
      <div class="digest-card" id="weeklyDigest">
        <div class="digest-header">
          <span class="digest-title">ğŸ“ˆ Weekly Digest</span>
          <span class="digest-date" id="digestDate"></span>
        </div>
        <div class="digest-content" id="digestContent"></div>
      </div>
      
      <div class="overview-cards">
        <div class="overview-card" data-goto="jobsearch">
          <div class="overview-card-icon">ğŸ¯</div>
          <div class="overview-card-title">Job Search</div>
          <div class="overview-card-stats">
            <span class="stat-mini" id="overview-queue">0 in queue</span>
            <span class="stat-mini" id="overview-sent">0 sent</span>
            <span class="stat-mini hot" id="overview-hot">0 hot</span>
          </div>
        </div>
        
        <div class="overview-card" data-goto="analytics">
          <div class="overview-card-icon">ğŸ“Š</div>
          <div class="overview-card-title">Analytics</div>
          <div class="overview-card-stats">
            <span class="stat-mini" id="overview-response-rate">0% response</span>
            <span class="stat-mini" id="overview-this-week">0 this week</span>
          </div>
        </div>
        
        <div class="overview-card" data-goto="interviews">
          <div class="overview-card-icon">ğŸ¤</div>
          <div class="overview-card-title">Active Interviews</div>
          <div class="overview-card-stats">
            <span class="stat-mini" id="overview-interviews">0 in pipeline</span>
          </div>
        </div>
      </div>
      
      <div class="section-header">ğŸ”¥ Actions Required</div>
      <div class="tasks-section" id="overview-tasks"></div>
      
      <div class="section-header">â° Follow-Ups Due</div>
      <div class="followups-list" id="overview-followups"></div>
    </div>
    
    <!-- JOB SEARCH -->
    <div class="section" id="jobsearch">
      <div class="page-header">
        <div>
          <h1 class="page-title">Job Search</h1>
          <p class="page-subtitle">Manage your outreach pipeline</p>
        </div>
        <div class="header-actions">
          <button class="btn" id="addLeadBtn">+ New Lead <kbd>N</kbd></button>
        </div>
      </div>
      
      <!-- Global Search -->
      <div class="search-bar">
        <input type="text" class="search-input" id="globalSearch" placeholder="Search companies, contacts, notes... (press / to focus)">
        <div class="search-filters">
          <select class="filter-select" id="pipelineFilter">
            <option value="all">All Pipelines</option>
            <option value="startup">ğŸš€ Startups</option>
            <option value="enterprise">ğŸ¢ Enterprise</option>
          </select>
          <select class="filter-select" id="statusFilter">
            <option value="all">All Statuses</option>
            <option value="queue">ğŸ“‹ Queue</option>
            <option value="draft">ğŸ“ Draft</option>
            <option value="sent">ğŸ“§ Sent</option>
            <option value="replied">âœ… Replied</option>
            <option value="interview">ğŸ¤ Interview</option>
          </select>
          <button class="btn btn-ghost" id="saveFilterBtn">ğŸ’¾ Save Filter</button>
        </div>
      </div>
      
      <!-- Sub-navigation tabs -->
      <div class="sub-nav" id="job-sub-nav">
        <button class="sub-nav-btn active" data-subtab="pipeline">ğŸ“Š Pipeline</button>
        <button class="sub-nav-btn" data-subtab="outreach">ğŸ“§ Outreach</button>
        <button class="sub-nav-btn" data-subtab="submitted">âœ… Submitted</button>
        <button class="sub-nav-btn" data-subtab="rejected">âŒ Rejected</button>
      </div>
      
      <!-- Pipeline Sub-tab -->
      <div class="sub-section active" id="pipeline">
        <div class="stats-row">
          <div class="stat-card">
            <div class="stat-label">ğŸš€ Startup Queue</div>
            <div class="stat-value green" id="stat-startup-queue">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ğŸ¢ Enterprise Queue</div>
            <div class="stat-value blue" id="stat-enterprise-queue">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ğŸ“§ Emails Sent</div>
            <div class="stat-value purple" id="stat-sent">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">âœ… Replies</div>
            <div class="stat-value green" id="stat-replies">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">ğŸ”¥ Hot Leads</div>
            <div class="stat-value orange" id="stat-hot">0</div>
          </div>
        </div>
        
        <div class="hot-section" id="hot-section">
          <div class="hot-title">ğŸ”¥ Hot Leads â€” Action Required</div>
          <div id="hot-items"></div>
        </div>
        
        <div class="queues-grid">
          <div class="queue-box">
            <div class="queue-header">
              <span class="queue-title">ğŸš€ Startup Scout Queue</span>
              <span class="queue-count" id="startup-queue-count">0</span>
            </div>
            <div class="queue-items" id="startup-queue-items"></div>
          </div>
          
          <div class="queue-box">
            <div class="queue-header">
              <span class="queue-title">ğŸ¢ Enterprise Hunter Queue</span>
              <span class="queue-count" id="enterprise-queue-count">0</span>
            </div>
            <div class="queue-items" id="enterprise-queue-items"></div>
          </div>
        </div>
      </div>
      
      <!-- Outreach Sub-tab -->
      <div class="sub-section" id="outreach">
        <table class="outreach-table">
          <thead>
            <tr>
              <th>Company</th>
              <th>Contact</th>
              <th>Pipeline</th>
              <th>Status</th>
              <th>Follow-Up</th>
              <th>Network</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="outreach-tbody"></tbody>
        </table>
      </div>
      
      <!-- Submitted Sub-tab -->
      <div class="sub-section" id="submitted">
        <table class="outreach-table">
          <thead>
            <tr>
              <th>Company</th>
              <th>Role</th>
              <th>Applied</th>
              <th>Status</th>
              <th>Notes</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="submitted-tbody"></tbody>
        </table>
        <button class="btn" id="add-application-btn">+ Add Application</button>
      </div>
      
      <!-- Rejected Sub-tab -->
      <div class="sub-section" id="rejected">
        <table class="outreach-table">
          <thead>
            <tr>
              <th>Company</th>
              <th>Role</th>
              <th>Rejected</th>
              <th>Reason</th>
            </tr>
          </thead>
          <tbody id="rejected-tbody"></tbody>
        </table>
      </div>
    </div>
    
    <!-- ANALYTICS -->
    <div class="section" id="analytics">
      <div class="page-header">
        <div>
          <h1 class="page-title">ğŸ“Š Response Analytics</h1>
          <p class="page-subtitle">Track what's working</p>
        </div>
      </div>
      
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-label">Overall Response Rate</div>
          <div class="stat-value green" id="analytics-response-rate">0%</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Avg Time to Response</div>
          <div class="stat-value blue" id="analytics-avg-time">0 days</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">This Week</div>
          <div class="stat-value purple" id="analytics-this-week">0 sent</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Best Template</div>
          <div class="stat-value orange" id="analytics-best-template">â€”</div>
        </div>
      </div>
      
      <div class="analytics-grid">
        <div class="chart-card">
          <h3>Response Rate by Pipeline</h3>
          <canvas id="pipelineChart"></canvas>
        </div>
        <div class="chart-card">
          <h3>Response Rate by Contact Type</h3>
          <canvas id="contactChart"></canvas>
        </div>
        <div class="chart-card">
          <h3>Activity Over Time</h3>
          <canvas id="timelineChart"></canvas>
        </div>
        <div class="insights-card">
          <h3>ğŸ’¡ What's Working</h3>
          <div id="insightsContent"></div>
        </div>
      </div>
    </div>
    
    <!-- INTERVIEWS -->
    <div class="section" id="interviews">
      <div class="page-header">
        <div>
          <h1 class="page-title">ğŸ¤ Interview Pipeline</h1>
          <p class="page-subtitle">Active interview processes</p>
        </div>
      </div>
      
      <div class="kanban-board">
        <div class="kanban-column">
          <div class="kanban-header">
            <span class="kanban-title">ğŸ“ Screening</span>
            <span class="kanban-count" id="count-screening">0</span>
          </div>
          <div class="kanban-items" id="stage-screening" data-stage="screening"></div>
        </div>
        
        <div class="kanban-column">
          <div class="kanban-header">
            <span class="kanban-title">ğŸ’» Technical</span>
            <span class="kanban-count" id="count-technical">0</span>
          </div>
          <div class="kanban-items" id="stage-technical" data-stage="technical"></div>
        </div>
        
        <div class="kanban-column">
          <div class="kanban-header">
            <span class="kanban-title">ğŸ‘” Hiring Manager</span>
            <span class="kanban-count" id="count-manager">0</span>
          </div>
          <div class="kanban-items" id="stage-manager" data-stage="manager"></div>
        </div>
        
        <div class="kanban-column">
          <div class="kanban-header">
            <span class="kanban-title">ğŸ† Final Round</span>
            <span class="kanban-count" id="count-final">0</span>
          </div>
          <div class="kanban-items" id="stage-final" data-stage="final"></div>
        </div>
        
        <div class="kanban-column">
          <div class="kanban-header">
            <span class="kanban-title">ğŸ‰ Offer</span>
            <span class="kanban-count" id="count-offer">0</span>
          </div>
          <div class="kanban-items" id="stage-offer" data-stage="offer"></div>
        </div>
      </div>
    </div>
    
    <!-- HEARING PROJECT -->
    <div class="section" id="hearing">
      <div class="page-header">
        <div>
          <h1 class="page-title">Hearing Project</h1>
          <p class="page-subtitle">Research & Development</p>
        </div>
        <button class="btn" id="save-notes-btn">ğŸ’¾ Save Notes</button>
      </div>
      
      <div class="section-header">ğŸ“ Project Notes</div>
      <textarea class="note-area" id="hearing-notes" placeholder="Project notes, research, ideas..."></textarea>
      
      <div class="section-header">âœ… Tasks</div>
      <div class="tasks-section" id="hearing-tasks"></div>
    </div>
  </div>
  
  <!-- Lead Modal -->
  <div class="modal" id="leadModal">
    <div class="modal-content">
      <h3 class="modal-title" id="leadModalTitle">Add Lead</h3>
      <form id="leadForm">
        <input type="hidden" id="leadId" value="">
        <input type="hidden" id="leadPipeline" value="startup">
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Company *</label>
            <input type="text" class="form-input" id="leadCompany" required>
            <button type="button" class="btn-inline btn-sm" id="findContactBtn">ğŸ” Find Contact</button>
          </div>
          <div class="form-group">
            <label class="form-label">Role</label>
            <input type="text" class="form-input" id="leadRole">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Contact Name</label>
            <input type="text" class="form-input" id="leadContact">
          </div>
          <div class="form-group">
            <label class="form-label">Title</label>
            <input type="text" class="form-input" id="leadTitle">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" class="form-input" id="leadEmail">
          </div>
          <div class="form-group">
            <label class="form-label">LinkedIn</label>
            <input type="text" class="form-input" id="leadLinkedIn">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Source</label>
            <input type="text" class="form-input" id="leadSource">
          </div>
          <div class="form-group">
            <label class="form-label">Status</label>
            <select class="form-select" id="leadStatus">
              <option value="queue">In Queue</option>
              <option value="draft">Draft Ready</option>
              <option value="sent">Email Sent</option>
              <option value="replied">Replied</option>
              <option value="interview">Interviewing</option>
            </select>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Email Template</label>
          <select class="form-select" id="emailTemplate">
            <option value="">â€” Select Template â€”</option>
          </select>
          <button type="button" class="btn-inline btn-sm" id="previewTemplateBtn">ğŸ‘ï¸ Preview</button>
        </div>
        
        <div class="form-group">
          <label class="form-label">Notes</label>
          <textarea class="form-textarea" id="leadNotes"></textarea>
        </div>
        
        <div class="modal-actions">
          <button type="submit" class="btn">Save Lead</button>
          <button type="button" class="btn btn-ghost" id="modal-cancel-btn">Cancel</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Company Intel Panel -->
  <div class="side-panel" id="companyPanel">
    <div class="panel-header">
      <h3 id="panelCompanyName">Company Intel</h3>
      <button class="panel-close" id="closePanel">Ã—</button>
    </div>
    <div class="panel-content" id="panelContent">
      <div class="intel-loading">Loading company data...</div>
    </div>
  </div>
  
  <!-- Activity Timeline Modal -->
  <div class="modal" id="timelineModal">
    <div class="modal-content timeline-modal">
      <h3 class="modal-title">ğŸ“… Activity Timeline</h3>
      <div id="timelineContent"></div>
      <button class="btn btn-ghost" id="closeTimelineBtn">Close</button>
    </div>
  </div>
  
  <!-- Application Modal -->
  <div class="modal" id="appModal">
    <div class="modal-content">
      <h3 class="modal-title">Add Application</h3>
      <form id="appForm">
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Company *</label>
            <input type="text" class="form-input" id="appCompany" required>
          </div>
          <div class="form-group">
            <label class="form-label">Role *</label>
            <input type="text" class="form-input" id="appRole" required>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Applied Date</label>
            <input type="date" class="form-input" id="appDate">
          </div>
          <div class="form-group">
            <label class="form-label">Status</label>
            <select class="form-select" id="appStatus">
              <option value="applied">Applied</option>
              <option value="screening">Screening</option>
              <option value="interviewing">Interviewing</option>
              <option value="offer">Offer</option>
            </select>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Notes / Link</label>
          <textarea class="form-textarea" id="appNotes"></textarea>
        </div>
        
        <div class="modal-actions">
          <button type="submit" class="btn">Add Application</button>
          <button type="button" class="btn btn-ghost" id="app-modal-cancel-btn">Cancel</button>
        </div>
      </form>
    </div>
  </div>
  
  <div id="toast"></div>
  
  <script src="worky.js"></script>
</body>
</html>
